import{a as o}from"./chunk-5LCWTLC6.js";import{b as h}from"./chunk-52S2453R.js";import{A as n,Y as a,ba as p,m as i,p as s}from"./chunk-PZC2ALTS.js";var d=(()=>{class e{constructor(r){this.http=r,this.apiUrl=o.apiUrl+"/jobs.php",this.user=null,this.userId=null;let t=localStorage.getItem("user");this.user=t?JSON.parse(t):null,this.userId=this.user?.id||null}getCurrentUserId(){return this.userId}getJobs(){return this.http.get(this.apiUrl)}getJob(r){return this.http.get(`${this.apiUrl}/?id=${r}&payment_info=true`)}getTotalPaidPayment(){return this.http.get(`${this.apiUrl}/?totalpayment=paid`)}getTotalPendingPayment(){return this.http.get(`${this.apiUrl}/?totalpayment=pending`)}getJobsCountTotal(){return this.http.get(`${this.apiUrl}/?totalJobsCount=all`)}getJobsCountPending(){return this.http.get(`${this.apiUrl}/?totalJobsCount=pending`)}getJobsCountProgress(){return this.http.get(`${this.apiUrl}/?totalJobsCount=in_progress`)}getJobsCountCompleted(){return this.http.get(`${this.apiUrl}/?totalJobsCount=completed`)}getJobsCountCurrentTotal(){return this.http.get(`${this.apiUrl}/?totalJobsCount=all&month=all`)}getJobsCountCurrentPending(){return this.http.get(`${this.apiUrl}/?totalJobsCount=pending&month=pending`)}getJobsCountCurrentProgress(){return this.http.get(`${this.apiUrl}/?totalJobsCount=in_progress&month=progress`)}getJobsCountCurrentCompleted(){return this.http.get(`${this.apiUrl}/?totalJobsCount=completed&month=completed`)}createJob(r){return this.http.post(this.apiUrl,r)}updateJob(r,t){return this.http.put(`${this.apiUrl}/?id=${r}`,t)}generateInvoice(r){return this.http.get(`${this.apiUrl}?id=${r}&invoice=true`)}getCustomers(){return this.http.get(`${o.apiUrl}/users.php`)}createCustomer(r){return this.http.post(`${o.apiUrl}/users.php`,r).pipe(s(t=>{if(t&&t.success)return{id:t.id,full_name:t.full_name,phone:t.phone,email:t.email};throw new Error(t?.message||"Unknown error creating customer")}),n(t=>(console.error("API Error:",t),i(()=>new Error(t.error?.message||t.message||"Failed to create customer. Please try again.")))))}static{this.\u0275fac=function(t){return new(t||e)(p(h))}}static{this.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{d as a};
